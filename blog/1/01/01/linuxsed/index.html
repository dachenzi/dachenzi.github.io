<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>Linuxsed &middot; Lee Xin</title>

  
  <link rel="stylesheet" href="https://dachenzi.github.io/css/poole.css">
  <link rel="stylesheet" href="https://dachenzi.github.io/css/hyde.css">
  <link rel="stylesheet" href="https://dachenzi.github.io/css/poole-overrides.css">
  <link rel="stylesheet" href="https://dachenzi.github.io/css/hyde-overrides.css">
  <link rel="stylesheet" href="https://dachenzi.github.io/css/hyde-x.css">
  <link rel="stylesheet" href="https://dachenzi.github.io/css/highlight/sunburst.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400italic,700|Abril+Fatface">
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  

  
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://dachenzi.github.io/touch-icon-144-precomposed.png">
  <link href="https://dachenzi.github.io/favicon.png" rel="icon">

  
  
  
  

  <meta name="description" content="Your default page description">
  <meta name="keywords" content="your,default,page,keywords">
  
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'Your Google Analytics tracking code', 'auto');
    ga('send', 'pageview');
  </script>
  
</head>
<body class="theme-base-08">
<div class="sidebar">
  <div class="container sidebar-sticky">
    <div class="sidebar-about">
      
      <h1>Lee Xin</h1>
      <p class="lead">Your favourite quote or soundbite.</p>
    </div>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item"><a href="https://dachenzi.github.io/">Blog</a></li>
      
    </ul>

    <ul class="sidebar-nav">
      <li class="sidebar-nav-item">
      
      
      
      
      
      
      
      
      
      </li>
    </ul>

    
    <p><script id='flattr'>
      (function(id){
        var s = document.getElementById(id);
        var f = document.createElement('iframe');
        f.src = '//api.flattr.com/button/view/?uid=&button=compact&url=https:\/\/dachenzi.github.io\/&title=daxin\u0027s blog';
        f.title = 'Flattr';
        f.height = 20;
        f.width = 110;
        f.style.borderWidth = 0;
        s.parentNode.insertBefore(f, s);
      })('flattr');
    </script></p>
    

    <p>Copyright &copy; 2020 <a href="https://dachenzi.github.io/license/">License</a><br/>
       Powered by <a href="http://gohugo.io">Hugo</a> and <a href="https://github.com/zyro/hyde-x">Hyde-X</a></p>

  </div>
</div>


<div class="content container">
  <div class="post">
    <h1 class="post-title">Linuxsed</h1>
    <span class="post-date">Jan 1, 0001 &middot; 7 minute read &middot; <a href="https://dachenzi.github.io/blog/1/01/01/linuxsed/#disqus_thread">Comments</a>
    </span>
    <p>{% raw %}</p>
<h2 id="1-功能说明">1 功能说明</h2>
<p>        sed 是一种在线编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。接着处理下一行，这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出或者加入i参数。Sed主要用来自动编辑一个或多个文件；简化对文件的反复操作；编写转换程序等。   <br>
        <strong>小结：sed的功能是，对字符串进行增加、删除、改变、查找，即增删改查!</strong></p>
<h1 id="2-语法格式">2 语法格式</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">sed <span style="color:#f92672">[</span>optian<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>sed-command<span style="color:#f92672">]</span> <span style="color:#f92672">[</span>input-file<span style="color:#f92672">]</span>

<span style="color:#75715e"># 注意sed和后面的选项之间至少有一个空格。</span>
<span style="color:#75715e"># 为了避免混淆，称呼sed为sed软件。sed-commands(sed命令)是sed软件内置的一些命令选项，为了和前面的options(选项)区分，故称为sed命令。</span>
<span style="color:#75715e"># sed-commands既可以是单个sed命令，也可以是多个sed命令组合。</span>
<span style="color:#75715e"># input-file(输入文件)是可选项，sed还能够从标准输入如管道获取输入。</span>
</code></pre></div><h1 id="3-常用选项">3 常用选项</h1>
<p>测试文本内容为：</p>
<pre><code>[root@lixin ~]# cat daxin.txt 
I am daxin teacher!
I teach linux.

I like badminton ball ,billiard ball and chinese chess!
my blog is http://daxin.blog.51cto.com
our site is http://www.cnblogs.org
my qq num is 49000448.

not 4900000448.
my god ,i am not dachenzi,but daxin!
gd
good
gooood
[root@lixin ~]#
</code></pre><h2 id="31-取消标准输出">3.1 取消标准输出</h2>
<p>-n：表示取消标准输出（默认情况下sed替换后会把文件所有内容包括更改过的内容一起输出到屏幕上，我们使用-n后，让它只输出匹配表达式的字符串，一般和p连用，p表示print，打印表达式结果）。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed  &#39;/old/p&#39; daxin.txt    </span>
I am daxin teacher!
I am daxin teacher!
I teach linux.

I like badminton ball ,billiard ball and chinese chess!
my blog is http://daxin.blog.51cto.com
my blog is http://daxin.blog.51cto.com
our site is http://www.cnblogs.org
my qq num is 49000448.

not 4900000448.
my god ,i am not dachenzi,but daxin!
my god ,i am not dachenzi,but daxin!
gd
good
gooood
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed  -n &#39;/old/p&#39; daxin.txt </span>
I am daxin teacher!
my blog is http://daxin.blog.51cto.com
my god ,i am not dachenzi,but daxin!
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#     //-n和p连用后表示只打印符合表达式规则的行</span>
</code></pre></div><h2 id="32-支持扩展正则表达式">3.2 支持扩展正则表达式</h2>
<p>-r：参数用来支持扩展正则表达式，比如{}符号，如果不加-r参数需要使用\来进行转意。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -n &#39;/o\{1,2\}/p&#39; daxin.txt </span>
I am daxin teacher!
I like badminton ball ,billiard ball and chinese chess!
my blog is http://daxin.blog.51cto.com
our site is http://www.cnblogs.org
not 4900000448.
my god ,i am not dachenzi,but daxin!
good
gooood
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -nr &#39;/o{1,2}/p&#39; daxin.txt    </span>
I am daxin teacher!
I like badminton ball ,billiard ball and chinese chess!
my blog is http://daxin.blog.51cto.com
our site is http://www.cnblogs.org
not 4900000448.
my god ,i am not dachenzi,but daxin!
good
gooood
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#  //表达式含义：o最少重复1次，最多重复2次</span>
</code></pre></div><h2 id="33-直接修改文件内容">3.3 直接修改文件内容</h2>
<p>-i：表示直接对目标文件进行操作（增删改查），加上这个参数之后，不会在屏幕上输出信息，会直接对源文件进行更改(慎用)。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -i &#39;/^$/d&#39; daxin.txt   //直接删除文件内的空行，并没有打印。</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># cat daxin.txt  </span>
I am daxin teacher!
I teach linux.
I like badminton ball ,billiard ball and chinese chess!
my blog is http://daxin.blog.51cto.com
our site is http://www.cnblogs.org
my qq num is 49000448.
not 4900000448.
my god ,i am not dachenzi,but daxin!
gd
good
gooood
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><h1 id="4-sed-command">4 sed-command</h1>
<p>测试文本内容为：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># cat study.txt </span>
1,I am a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><h2 id="41-增加">4.1 增加</h2>
<p>-i：表示插入，插入到目标行之前。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2i she is a girl&#39; study.txt </span>
1,I am a Linux student
she is a girl
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //2i表示在第二行插入，不加行号表示在每一行之前插入</span>
</code></pre></div><p>-a：表示在目标行之后添加</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed  &#39;3a he is a boy&#39; study.txt  </span>
1,I am a Linux student
2,I am studying Linux
3,I like movice
he is a boy
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><p>多行增加</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 方法一：利用\n,表示换行符</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2i 1\n2\n3&#39; study.txt </span>
1,I am a Linux student
<span style="color:#ae81ff">1</span>
<span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">3</span>
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>

<span style="color:#75715e"># 方法二：利用shell特性（\回车）表示接着下一行。</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2i 1\</span>
&gt; 2<span style="color:#ae81ff">\
</span><span style="color:#ae81ff"></span>&gt; <span style="color:#ae81ff">3</span> <span style="color:#ae81ff">\&#39;</span> study.txt
1,I am a Linux student
<span style="color:#ae81ff">1</span>
<span style="color:#ae81ff">2</span>
<span style="color:#ae81ff">3</span>
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><h3 id="411-限定区域添加">4.1.1 限定区域添加</h3>
<p>sed软件可以对单行或多行进行处理。如果在sed命令前面不指定地址范围，那么默认会匹配所有行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">n1<span style="color:#f92672">[</span>,n2<span style="color:#f92672">]{</span>sed-commands<span style="color:#f92672">}</span>
<span style="color:#75715e"># 注：地址用逗号分隔的，n1,n2可以用数字、正则表达式、或二者的组合表示。</span>
</code></pre></div><p>例子：<br>
<code>n{sed-commands}</code> 对第n行操作。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;5c she is a girl &#39; study.txt </span>
1,I am a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
she is a girl 
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示针对第武行进行替换，替换为she is a girl</span>
</code></pre></div><p><code>n,m{sed-commands}</code>对n到m行操作,包括第n,m行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2,4c she is a girl &#39; study.txt </span>
1,I am a Linux student
she is a girl 
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示把2到4行替换成she is a girl。</span>
<span style="color:#e6db74">```</span>　　　
<span style="color:#e6db74">`</span>n，+m<span style="color:#f92672">{</span>sed-commands<span style="color:#f92672">}</span><span style="color:#e6db74">`</span>对n到n+m行操作,包括第n,m行
<span style="color:#e6db74">```</span>bash
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2,3d&#39; study.txt </span>
1,I am a Linux student
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># //表示2到3行删除</span>
</code></pre></div><p><code>1~2{sed-commands}</code> 对1,3,5,7,……行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2~2d&#39; study.txt  </span>
1,I am a Linux student
3,I like movice
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示对2,4,6,8等偶数行进行操作</span>
</code></pre></div><p><code>n，${sed-commands}</code> 对n到最后一行($代表最后一行)操作,包括第n行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2,$d&#39; study.txt </span>
1,I am a Linux student
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># //删除2行到$(尾行)</span>
</code></pre></div><p><code>/Linux/{sed-commands}</code> 对匹配daxin的行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/Linux/d&#39; study.txt </span>
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示把包涵Linux的行删掉</span>
</code></pre></div><p><code>/Linux/,/movice/{sed-commands}</code>对匹配daxin的行到匹配Alex的行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/Linux/,/movice/d&#39; study.txt  </span>
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示把第一个包涵Linux到第一个包涵movice的行删掉</span>
</code></pre></div><p><code>/movice/,${sed-commands}</code>对匹配daxin的行到最后一行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/movice/,$d&#39; study.txt </span>
1,I am a Linux student
2,I am studying Linux
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># //表示从movice到最后一行删掉</span>
</code></pre></div><p><code>/games/,10{sed-commands}</code>对匹配daxin的行到第10行操作，注意：如果前10行没有匹配到daxin，sed软件会显示10行以后的匹配daxin的所有行，如果有。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/games/,4d&#39; study.txt    </span>
1,I am a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><p><code>1,/am/{sed-commands}</code> 对第1行到匹配Alex的行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;1,/am/d&#39; study.txt </span>
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //表示从1行到第一个匹配到am的行删除</span>
</code></pre></div><p><code>/student/,+2{sed-commands}</code> 对匹配daxin的行到其后的2行操作</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/student/,+2d&#39; study.txt </span>
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># //表示从匹配student的第一项到它的后两行进行删除</span>
</code></pre></div><h2 id="42-删除">4.2 删除</h2>
<p>-d：表示删除，可以直接删除行，可以删除包涵关键字的行</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;2d&#39; study.txt </span>
1,I am a Linux student
3,I like movice
4,I am super man
5,I like computer games
games       //删除第2行
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/am/d&#39; study.txt </span>
3,I like movice
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //删除包涵am的行</span>
</code></pre></div><h2 id="43-查找">4.3 查找</h2>
<p>p表示打印，把符合我们表达式的项目打印出来，由于sed默认输出所有，再使用拍的话会打印两遍，所以一般和-n参数连用，表示只打印匹配到的行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;/am/p&#39; study.txt  //由于没有-n所以会把匹配到的行和默认输出一起打印</span>
1,I am a Linux student
1,I am a Linux student
2,I am studying Linux
2,I am studying Linux
3,I like movice
4,I am super man
4,I am super man
5,I like computer games
5,I like computer games
games
games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -n &#39;/am/p&#39; study.txt  //-n取消默认输出，p打印，所以只显示匹配项</span>
1,I am a Linux student
2,I am studying Linux
4,I am super man
5,I like computer games
games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed –nr ‘/am|student/’ study.txt  //查找包含am或student的行</span>
1,I am a Linux student
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed -n &#39;2p&#39; study.txt </span>
2,I am studying Linux
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#   //只显示第二行</span>
</code></pre></div><h2 id="44-改">4.4 改</h2>
<p>-c：按行替换，表示一次替换一整行的内容。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;1c she is a girl&#39; study.txt </span>
she is a girl
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># //表示把第1行，替换成she is a girl </span>
</code></pre></div><h3 id="441-文本替换">4.4.1 文本替换</h3>
<p>s：表示全局查找某个关键字，并替换每行第一个匹配项。<br>
g：表示全局替换，不属于sed命令，一般搭配s使用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 格式：</span>
sed  ‘s#1#2#g’
<span style="color:#75715e">#:表示定界符，可以是/、@、或者其他成对符号。</span>
<span style="color:#75715e"># 1：表示要替换的源文件中的字符串（可以是正则表达式）。</span>
<span style="color:#75715e"># 2：表示要替换成的文件，必须是给定的字符串。</span>
</code></pre></div><p>文本替换实例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># !ca</span>
cat study.txt 
1,I am a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed  &#39;1s#a#b#&#39; study.txt    //把第一个a替换为b</span>
1,I bm a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed  &#39;1s#a#b#g&#39; study.txt  //把第一行所有a替换为b</span>
1,I bm b Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><p>变量替换实例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># n=a       //设定变量n的值为a</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># m=c     //设定变量m的值为c</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># echo $n   //验证变量n的值</span>
a
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># echo $m   //验证变量b的值</span>
c
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#39;1s#$n#$m#g&#39; study.txt  //由于’’单引号，不解释内部变量值所以没有替换</span>
1,I am a Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># sed &#34;1s#$n#$m#g&#34; study.txt  // “” 双引号表示引用内部的变量，所以替换了 </span>
1,I cm c Linux student
2,I am studying Linux
3,I like movice
4,I am super man
5,I like computer games
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#  //表示可以利用变量的值来对字符串进行过滤或替换（必须用””双引号）</span>
</code></pre></div><h3 id="442-后向引用">4.4.2 后向引用</h3>
<p>        sed软件的( )的功能可以记住正则表达式的一部分，其中，\1为第一个记住的模式即第一个小括号中的匹配内容，\2第二记住的模式，即第二个小括号中的匹配内容，sed最多可以记住9个。这种在后面调用的方式，叫做后向引用。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 格式：</span>
sed ‘s#<span style="color:#f92672">()()</span><span style="color:#75715e">#\1\2#g’</span>
<span style="color:#75715e"># 第一个（）表示第一项，第二个（）表示第二项，一次类推，最多九个，不想匹配的可以写在括号后面。</span>
<span style="color:#75715e"># \1表示引用前面第一个（）括号内的内容，\2表示引用前面第二个（）括号内的内容。</span>
</code></pre></div><p>实例：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e"># 获取ip地址信息</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># ifconfig eth0</span>
eth0      Link encap:Ethernet  HWaddr 00:0C:29:E4:83:06  
    inet addr:10.0.0.8  Bcast:10.0.0.255  Mask:255.255.255.0
    inet6 addr: fe80::20c:29ff:fee4:8306/64 Scope:Link
    UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
    RX packets:981 errors:0 dropped:0 overruns:0 frame:0
    TX packets:562 errors:0 dropped:0 overruns:0 carrier:0
    collisions:0 txqueuelen:1000 
    RX bytes:85039 <span style="color:#f92672">(</span>83.0 KiB<span style="color:#f92672">)</span>  TX bytes:62853 <span style="color:#f92672">(</span>61.3 KiB<span style="color:#f92672">)</span>
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e"># ifconfig eth0 | sed -nr &#39;2s#^.*r:(.*).?B.*$#\1#gp&#39;</span>
10.0.0.8  
<span style="color:#f92672">[</span>root@lixin ~<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
<span style="color:#75715e"># ^.*r: 表示以任意字符开头到r：为止。</span>
<span style="color:#75715e"># (.*) 表示任意字符，这里就是我们要取得ip信息。</span>
<span style="color:#75715e"># .?B.*$ ，.?表示匹配任意两个字符，B.*$表示从B到结尾。</span>
</code></pre></div><p>特殊符号的使用:<br>
批量进行文件后缀名更改</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin lixin<span style="color:#f92672">]</span><span style="color:#75715e"># ls </span>
LinuxAdministartor10.bak  LinuxAdministartor2.bak  LinuxAdministartor4.bak  LinuxAdministartor6.bak  LinuxAdministartor8.bak
LinuxAdministartor1.bak   LinuxAdministartor3.bak  LinuxAdministartor5.bak  LinuxAdministartor7.bak  LinuxAdministartor9.bak
<span style="color:#f92672">[</span>root@lixin lixin<span style="color:#f92672">]</span><span style="color:#75715e"># ls | sed -nr &#39;s#(^L.*[0-9])(.*$)#mv &amp; \1.txt#gp&#39;</span>
mv LinuxAdministartor10.bak LinuxAdministartor10.txt
mv LinuxAdministartor1.bak LinuxAdministartor1.txt
mv LinuxAdministartor2.bak LinuxAdministartor2.txt
mv LinuxAdministartor3.bak LinuxAdministartor3.txt
mv LinuxAdministartor4.bak LinuxAdministartor4.txt
mv LinuxAdministartor5.bak LinuxAdministartor5.txt
mv LinuxAdministartor6.bak LinuxAdministartor6.txt
mv LinuxAdministartor7.bak LinuxAdministartor7.txt
mv LinuxAdministartor8.bak LinuxAdministartor8.txt
mv LinuxAdministartor9.bak LinuxAdministartor9.txt
<span style="color:#f92672">[</span>root@lixin lixin<span style="color:#f92672">]</span><span style="color:#75715e"># ls | sed -nr &#39;s#(^L.*[0-9])(.*$)#mv &amp; \1.txt#gp&#39; | bash</span>
<span style="color:#f92672">[</span>root@lixin lixin<span style="color:#f92672">]</span><span style="color:#75715e"># ls</span>
LinuxAdministartor10.txt  LinuxAdministartor2.txt  LinuxAdministartor4.txt  LinuxAdministartor6.txt  LinuxAdministartor8.txt
LinuxAdministartor1.txt   LinuxAdministartor3.txt  LinuxAdministartor5.txt  LinuxAdministartor7.txt  LinuxAdministartor9.txt
<span style="color:#f92672">[</span>root@lixin lixin<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
<span style="color:#75715e"># &amp;符号表示前面两个分隔符中间的所有内容</span>
<span style="color:#75715e">#shell的命令都是bash在执行，所以把命令拼出来后直接交给bash处理即可</span>
</code></pre></div><h1 id="5-特定含义的符号">5 特定含义的符号</h1>
<h2 id="51-">5.1 =</h2>
<p>在sed中=号表示显示行号，但是会换行显示，只是显示行号可以省略“”（引号）。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e"># head -n 3 /etc/passwd | sed =</span>
<span style="color:#ae81ff">1</span>
root:x:0:0:root:/root:/bin/bash
<span style="color:#ae81ff">2</span>
bin:x:1:1:bin:/bin:/sbin/nologin
<span style="color:#ae81ff">3</span>
daemon:x:2:2:daemon:/sbin:/sbin/nologin
<span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><h2 id="52-l">5.2 l</h2>
<p>在sed中l表示显示隐藏字符，只是显示隐藏符号可以省略“”（引号）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e"># head -3 /etc/passwd | sed -n l </span>
root:x:0:0:root:/root:/bin/bash$
bin:x:1:1:bin:/bin:/sbin/nologin$
daemon:x:2:2:daemon:/sbin:/sbin/nologin$
<span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><h2 id="53">5.3</h2>
<p>在sed中，{}符号表示要执行的sed内置command的集合，之间用；（分号）隔开。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e"># sed -n &#39;10,20{=;p}&#39; /etc/passwd   </span>
<span style="color:#ae81ff">10</span>
uucp:x:10:14:uucp:/var/spool/uucp:/sbin/nologin
<span style="color:#ae81ff">11</span>
operator:x:11:0:operator:/root:/sbin/nologin
<span style="color:#ae81ff">12</span>
games:x:12:100:games:/usr/games:/sbin/nologin
<span style="color:#ae81ff">13</span>
gopher:x:13:30:gopher:/var/gopher:/sbin/nologin
<span style="color:#ae81ff">14</span>
ftp:x:14:50:FTP User:/var/ftp:/sbin/nologin
<span style="color:#ae81ff">15</span>
nobody:x:99:99:Nobody:/:/sbin/nologin
<span style="color:#ae81ff">16</span>
dbus:x:81:81:System message bus:/:/sbin/nologin
<span style="color:#ae81ff">17</span>
vcsa:x:69:69:virtual console memory owner:/dev:/sbin/nologin
<span style="color:#ae81ff">18</span>
abrt:x:173:173::/etc/abrt:/sbin/nologin
<span style="color:#ae81ff">19</span>
haldaemon:x:68:68:HAL daemon:/:/sbin/nologin
<span style="color:#ae81ff">20</span>
ntp:x:38:38::/etc/ntp:/sbin/nologin
<span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e">#  //{=;p}表示，先打印行号，在输出</span>
</code></pre></div><h2 id="54-g">5.4 G</h2>
<p>在sed中G表示在一行后面追加一行空行。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e"># head -n 3 /etc/passwd | sed G</span>
root:x:0:0:root:/root:/bin/bash

bin:x:1:1:bin:/bin:/sbin/nologin

daemon:x:2:2:daemon:/sbin:/sbin/nologin

<span style="color:#f92672">[</span>root@lixin daxin<span style="color:#f92672">]</span><span style="color:#75715e">#</span>
</code></pre></div><p>{% endraw %}</p>

  </div>
  <div id="disqus_thread"></div>
</div>


<script type="text/javascript">
var disqus_shortname = "your_disqus_shortname";
(function () {
    var s = document.createElement('script'); s.async = true;
    s.type = 'text/javascript';
    s.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
}());
</script>



<script type="text/javascript">
    var disqus_shortname = "your_disqus_shortname";
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

<script src="https://dachenzi.github.io/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
</body>
</html>

