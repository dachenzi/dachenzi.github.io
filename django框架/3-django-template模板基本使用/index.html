<!DOCTYPE html>
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>3-django-template模板基本使用  &middot; dahl&#39;s blog</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1">


<meta name="description" content="" />

<meta name="keywords" content="">


<meta property="og:title" content="3-django-template模板基本使用  &middot; dahl&#39;s blog ">
<meta property="og:site_name" content="dahl&#39;s blog"/>
<meta property="og:url" content="https://dachenzi.github.io/django%E6%A1%86%E6%9E%B6/3-django-template%E6%A8%A1%E6%9D%BF%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" />
<meta property="og:locale" content="en-EN">


<meta property="og:type" content="article" />
<meta property="og:description" content=""/>
<meta property="og:article:published_time" content="0001-01-01T00:00:00Z" />
<meta property="og:article:modified_time" content="0001-01-01T00:00:00Z" />

  
    
  

  

<script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "Article",
    "headline": "3-django-template模板基本使用",
    "author": {
      "@type": "Person",
      "name": "daxin.li"
    },
    "datePublished": "0001-01-01",
    "description": "",
    "wordCount":  808 
  }
</script>



<link rel="canonical" href="https://dachenzi.github.io/django%E6%A1%86%E6%9E%B6/3-django-template%E6%A8%A1%E6%9D%BF%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8/" />

<link rel="apple-touch-icon-precomposed" sizes="144x144" href="https://dachenzi.github.io/touch-icon-144-precomposed.png">
<link href="https://dachenzi.github.io/favicon.png" rel="icon">

<meta name="generator" content="Hugo 0.75.1" />

  <!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
<![endif]-->

<link href='https://fonts.googleapis.com/css?family=Merriweather:300%7CRaleway%7COpen+Sans' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="/css/font-awesome.min.css">
<link rel="stylesheet" href="/css/style.css">
<link rel="stylesheet" href="/css/highlight/default.css">

  
  
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

	  ga('create', 'Your Google Analytics tracking code', 'auto');
	  ga('send', 'pageview');

	</script>

</head>
<body>
  <main id="main-wrapper" class="container main_wrapper has-sidebar">
    <header id="main-header" class="container main_header">
  <div class="container brand">
  <div class="container title h1-like">
  <a class="baselink" href="https://dachenzi.github.io">
  foobar

</a>

</div>

  
<div class="container topline">
  
  few words about your site


</div>


</div>

  <nav class="container nav primary no-print">
  

<a class="homelink" href="https://dachenzi.github.io">home</a>


  
<a href="https://dachenzi.github.io/about">About</a>

<a href="https://dachenzi.github.io/post" title="Show list of posts">Posts</a>

<a href="https://dachenzi.github.io/tags" title="Show list of tags">Tags</a>


</nav>

<div class="container nav secondary no-print">
  
<a id="contact-link-email" class="contact_link" rel="me" aria-label="Email" href="mailto:dahlhin.li@gmail.com">
  <span class="fa fa-envelope-square"></span></a>



<a id="contact-link-github" class="contact_link" rel="me" aria-label="Github" href="https://github.com/enten/hugo-boilerplate">
  <span class="fa fa-github-square"></span></a>




 


















</div>


  

</header>


<article id="main-content" class="container main_content single">
  <header class="container hat">
  <h1>3-django-template模板基本使用
</h1>

</header>

  <div class="container content">
  <p>{% raw %}</p>
<p><!-- raw HTML omitted --><strong>文章目录</strong><!-- raw HTML omitted --></p>
<!-- raw HTML omitted -->
<ul>
<li><a href="#1-template">1 Template</a>
<ul>
<li><a href="#11-%E6%A8%A1%E6%9D%BF%E7%9A%84%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8">1.1 模板的基础使用</a>
<ul>
<li><a href="#111-%E5%8F%98%E9%87%8F">1.1.1 变量</a></li>
<li><a href="#112-%E6%B3%A8%E9%87%8A%E6%A0%87%E7%AD%BE">1.1.2 注释标签</a></li>
<li><a href="#113-%E6%B7%B1%E5%BA%A6%E6%9F%A5%E8%AF%A2">1.1.3 深度查询</a></li>
<li><a href="#114-%E5%86%85%E7%BD%AE%E5%8F%98%E9%87%8F%E8%BF%87%E6%BB%A4%E5%99%A8filter">1.1.4 内置变量过滤器filter</a></li>
<li><a href="#115-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8%E4%B9%8Bfilter">1.1.5 自定义过滤器之filter</a></li>
<li><a href="#116-%E8%87%AA%E5%AE%9A%E4%B9%89%E8%BF%87%E6%BB%A4%E5%99%A8%E4%B9%8Bsimple_tag">1.1.6 自定义过滤器之simple_tag</a></li>
<li><a href="#117-inclusion_tag">1.1.7 inclusion_tag</a></li>
</ul>
</li>
<li><a href="#12-%E9%80%BB%E8%BE%91%E6%8E%A7%E5%88%B6%E8%AF%AD%E6%B3%95">1.2 逻辑控制语法</a>
<ul>
<li><a href="#121-for%E6%A0%87%E7%AD%BE">1.2.1 for标签</a></li>
<li><a href="#122-if%E6%A0%87%E7%AD%BE">1.2.2 if标签</a></li>
<li><a href="#123-ifequalifnotequal-%E6%A0%87%E7%AD%BE">1.2.3 ifequal/ifnotequal 标签</a></li>
</ul>
</li>
<li><a href="#13-%E7%89%B9%E6%AE%8A%E6%A0%87%E7%AD%BE">1.3 特殊标签</a></li>
<li><a href="#14-extends%E6%A8%A1%E6%9D%BF%E7%BB%A7%E6%89%BF">1.4 extends模板继承</a></li>
<li><a href="#15-include%E5%BC%95%E5%85%A5">1.5 include引入</a></li>
</ul>
</li>
</ul>
<!-- raw HTML omitted -->
<h1 id="1-template">1 Template</h1>
<p>        使用 Django的 模板系统 (Template System)来实现将Python代码和HTML代码分开的目的。
<strong><code>python的模板包涵：HTML代码＋逻辑控制代码</code></strong> , 将具体数据嵌入到前端模板的语法，在一个html文件中包含模板语法的文件，可以认为是模板文件</p>
<h2 id="11-模板的基础使用">1.1 模板的基础使用</h2>
<p>主要分为两部分：渲染变量使用双大括号<code>{{ }}</code>，渲染标签则使用双大括号双百分号<code>{% %}</code></p>
<h3 id="111-变量">1.1.1 变量</h3>
<p>在html页面中使用两个大括号包起来的字符串叫做变量：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{{</span> Var_name <span style="color:#75715e">}}</span>
</code></pre></div><p>这里通过python django的shell环境来举例（在这个环境中可以直接引用 所属django模块中的变量等信息）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># 使用 manage.py进入shell界面</span>
<span style="color:#960050;background-color:#1e0010">终端中输入：</span>python manage<span style="color:#f92672">.</span>py shell
 
<span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">from</span> django.template <span style="color:#f92672">import</span> Context,Template
<span style="color:#f92672">&gt;&gt;&gt;</span> t <span style="color:#f92672">=</span> Template(<span style="color:#e6db74">&#39;My name is {{ name }}&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> c <span style="color:#f92672">=</span> Context({<span style="color:#e6db74">&#39;name&#39;</span>:<span style="color:#e6db74">&#39;dachenzi&#39;</span>})
<span style="color:#f92672">&gt;&gt;&gt;</span> t<span style="color:#f92672">.</span>render(c)        <span style="color:#75715e"># render会把变量进行渲染</span>
<span style="color:#e6db74">&#39;My name is dachenzi&#39;</span>
<span style="color:#f92672">&gt;&gt;&gt;</span>
</code></pre></div><h3 id="112-注释标签">1.1.2 注释标签</h3>
<p>单行注释 <code>{# #}</code>。
多行注释 <code>{% comment %} ... {% endcomment %}</code>.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{# 这是一个注释 #}</span>
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">comment</span> <span style="color:#75715e">%}</span><span style="color:#75715e">
</span><span style="color:#75715e">这是多行注释
</span><span style="color:#75715e"></span><span style="color:#75715e">{%</span> <span style="color:#66d9ef">endcomment</span> <span style="color:#75715e">%}</span>.
</code></pre></div><h3 id="113-深度查询">1.1.3 深度查询</h3>
<p>如果传递的变量是属组或者字典，那么需要进行深度查询(通过使用.(点)来完成深度查询)：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{{</span> Var_Name.username <span style="color:#75715e">}}</span>    # 获取Var_Name中的key为：username的值 --&gt; 变量为字典类型
<span style="color:#75715e">{{</span> Var_Name.2 <span style="color:#75715e">}}</span>      # 获取Var_Name中第2个值 --&gt; 变量为list类型
</code></pre></div><p>使用.带进行深度查询，查询list类型的数据</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> <span style="color:#f92672">from</span> django.template <span style="color:#f92672">import</span> context,Template
<span style="color:#f92672">&gt;&gt;&gt;</span> t <span style="color:#f92672">=</span> Template(<span style="color:#e6db74">&#39;hello {{ name.1}}&#39;</span>)
<span style="color:#f92672">&gt;&gt;&gt;</span> c <span style="color:#f92672">=</span> Context({<span style="color:#e6db74">&#39;name&#39;</span>:[<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>]})
<span style="color:#f92672">&gt;&gt;&gt;</span> t<span style="color:#f92672">.</span>render(c)
<span style="color:#e6db74">&#39;hello 2&#39;</span>
</code></pre></div><p>使用<code>items</code>循环字典类型(不加括号)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">{<span style="color:#f92672">%</span> <span style="color:#66d9ef">for</span> key,value <span style="color:#f92672">in</span> user_dict<span style="color:#f92672">.</span>items <span style="color:#f92672">%</span>}
<span style="color:#f92672">&lt;</span>li<span style="color:#f92672">&gt;</span>{{  key }}<span style="color:#f92672">-</span>{{ value }}<span style="color:#f92672">&lt;/</span>li<span style="color:#f92672">&gt;</span>
{<span style="color:#f92672">%</span> endfor <span style="color:#f92672">%</span>}
</code></pre></div><h3 id="114-内置变量过滤器filter">1.1.4 内置变量过滤器filter</h3>
<p>        可以理解为python中的内置函数，过滤器是模板的特有语法，通过前端来过滤部分数据。注意filter只能传递一个参数(也可以说是两个参数，因为第一个个参数已经固定，就是被处理的那个)。
格式：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{{</span> var<span style="color:#f92672">|</span><span style="color:#a6e22e">method</span><span style="color:#f92672">:</span>parameter<span style="color:#75715e">}}</span>
</code></pre></div><p>method表示过滤器部分过滤器如下：</p>
<table>
<thead>
<tr>
<th>过滤器</th>
<th>说明</th>
<th>举例</th>
</tr>
</thead>
<tbody>
<tr>
<td>first</td>
<td>取列表第一个元素</td>
<td></td>
</tr>
<tr>
<td>last</td>
<td>取列表最后元素</td>
<td></td>
</tr>
<tr>
<td>capfirst</td>
<td>首字母大写</td>
<td></td>
</tr>
<tr>
<td>cut</td>
<td>从字符串中移除指定的字符</td>
<td>{{ &lsquo;aLbLcL&rsquo;|cut:&lsquo;L&rsquo; }}答案是abc</td>
</tr>
<tr>
<td>yesno</td>
<td>变量可以是True、False、None，yesno的参数<!-- raw HTML omitted -->给定逗号分隔的三个值，返回3个值中的一个。<!-- raw HTML omitted -->True对应第一个<!-- raw HTML omitted -->False对应第二个<!-- raw HTML omitted -->None对应第三个<!-- raw HTML omitted -->如果参数只有2个，None等效False处理</td>
<td>{{ value | yesno:&ldquo;yeah,no,maybe&rdquo;}}</td>
</tr>
<tr>
<td>add</td>
<td>加法。参数是负数就是减法</td>
<td>数字加{{ value | add:&ldquo;100&rdquo;}}<!-- raw HTML omitted -->列表合并{{mylist | add:newlist}}</td>
</tr>
<tr>
<td>divisibleby</td>
<td>能否被整除 {{ value | divisibleby:&ldquo;3&rdquo; }}能被3整除返回True</td>
<td></td>
</tr>
<tr>
<td>addslashes</td>
<td>在反斜杠、单引号或者双引号前面加上反斜杠 {{ value | addslashes }}</td>
<td></td>
</tr>
<tr>
<td>length</td>
<td>返回变量的长度</td>
<td>{% if my_list | length &gt; 1 %}</td>
</tr>
<tr>
<td>default</td>
<td>变量等价False则使用缺省值</td>
<td>{{ value | default:&ldquo;nothing&rdquo; }}</td>
</tr>
<tr>
<td>default_if_none</td>
<td>变量为None使用缺省值</td>
<td>{{ value |default_if_none:&ldquo;nothing&rdquo; }}</td>
</tr>
<tr>
<td>date</td>
<td>格式化 date 或者 datetime 对象</td>
<td>实例：{{my_dict.date|date:&lsquo;Y n j&rsquo;}}<!-- raw HTML omitted -->Y 2000 年<!-- raw HTML omitted -->n 1~12 月<!-- raw HTML omitted -->j 1~31 日</td>
</tr>
<tr>
<td>切片相关</td>
<td>{{ value7|filesizeformat }}文件的字节数<!-- raw HTML omitted -->{{ value7|first }}第一个字符<!-- raw HTML omitted --> {{ value7|length }}长度<!-- raw HTML omitted --> {{ value7|slice:&quot;:-1&quot; }}切片<!-- raw HTML omitted --></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id="115-自定义过滤器之filter">1.1.5 自定义过滤器之filter</h3>
<p>        内置的过滤器总有不能满足我们业务需求的时候，这时，我们可以自定义过滤器，官方文档：https://docs.djangoproject.com/zh-hans/2.0/howto/custom-template-tags/</p>
<p>具体步骤为：</p>
<ol>
<li>在<code>app目录下</code>创建templatetags包(<code>名称必须为templatetags</code>)</li>
<li>在包下创建任意 .py 文件，如：my_tags.py ，用来存放自定义的filter或tag函数</li>
<li>编写自定义过滤器</li>
<li>在模板中加载templatetags并调用</li>
</ol>
<p>下面是my_tags.py的文件内容</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> django <span style="color:#f92672">import</span> template <span style="color:#75715e"># 需要先导入文件</span>
 
register <span style="color:#f92672">=</span> template<span style="color:#f92672">.</span>Library() <span style="color:#75715e"># register的名字是固定的,不可改变,因为下面会进行调用</span>
 
<span style="color:#a6e22e">@register.filter</span> <span style="color:#75715e"># 注册</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">multi</span>(num1,num2):
<span style="color:#66d9ef">return</span> num1 <span style="color:#f92672">*</span> num2
</code></pre></div><p>在引用的html模板文件中进行加载(可以放在模板文件头部，或者用之前加载也可以，当和extend同时使用时，放在entend下面)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">load</span> my_tags <span style="color:#75715e">%}</span> # 这里的名字就是我们创建的my_tags.py的文件名
</code></pre></div><p>调用</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{{</span> hello<span style="color:#f92672">|</span><span style="color:#a6e22e">multi</span><span style="color:#f92672">:</span><span style="color:#ae81ff">2</span> <span style="color:#75715e">}}</span>    # hello 表示传递的第一个参数，2表示传递的是第二个参数，冒号后面必须要紧跟传递的参数，多一个空格都不行
</code></pre></div><p>PS：filter 的函数只能接受一个额外参数(两个参数，默认会把要处理的对象当作第一个参数，第二个参数是我们需要传递的参数),可以用于if/for等语句的条件，渲染时 使用 {{  参数1 | xxx:参数2  }} 渲染 。</p>
<h3 id="116-自定义过滤器之simple_tag">1.1.6 自定义过滤器之simple_tag</h3>
<p>simpletag与filter不同的是，可以接受多个参数，但不可以用if/for等语句的条件，使用 {% xxx %} 渲染，创建步骤与filter相同</p>
<p>编写simpletag</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># my_tags.py文件</span>

<span style="color:#f92672">from</span> django <span style="color:#f92672">import</span> template <span style="color:#75715e"># 需要先导入文件</span>
 
register <span style="color:#f92672">=</span> template<span style="color:#f92672">.</span>Library() <span style="color:#75715e"># register的名字是固定的,不可改变,因为下面会进行调用</span>

<span style="color:#a6e22e">@register.simple_tag</span>   <span style="color:#75715e"># 必须要装饰我们自定义的函数才行</span>
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">simple_tag_multi</span>(num1,num2):
<span style="color:#66d9ef">return</span> num1 <span style="color:#f92672">*</span> num2　
</code></pre></div><p>加载完毕后调用方式使用 {% %}</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python">{<span style="color:#f92672">%</span> simple_tag_multi <span style="color:#ae81ff">10</span> <span style="color:#ae81ff">20</span> <span style="color:#f92672">%</span>}  <span style="color:#75715e"># 参数以空格隔开，多个空格效果相同</span>
</code></pre></div><h3 id="117-inclusion_tag">1.1.7 inclusion_tag</h3>
<p>存放于：django.template.Library.inclusion_tag()</p>
<p>主要作用：通过渲染一个模板来显示一些数据。</p>
<blockquote>
<p>例如，Django的Admin界面使用自定义模板标签显示&quot;添加/更改&quot;表单页面底部的按钮。这些按钮看起来总是相同，但链接的目标却是根据正在编辑的对象而变化的。 这种类型的标签被称为&quot;Inclusion 标签&quot;，属于自定义标签的一种。</p>
</blockquote>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">from</span> django.template <span style="color:#f92672">import</span> Library

register <span style="color:#f92672">=</span> Library()

<span style="color:#a6e22e">@register.inclusion_tag</span>(<span style="color:#e6db74">&#39;menu_tpl.html&#39;</span>)
<span style="color:#66d9ef">def</span> <span style="color:#a6e22e">menu_dict</span>():
    menu <span style="color:#f92672">=</span> {
        <span style="color:#e6db74">&#39;option1&#39;</span>: <span style="color:#e6db74">&#39;首页&#39;</span>,
        <span style="color:#e6db74">&#39;option2&#39;</span>: <span style="color:#e6db74">&#39;菜单一&#39;</span>,
        <span style="color:#e6db74">&#39;option3&#39;</span>: <span style="color:#e6db74">&#39;菜单二&#39;</span>,
        <span style="color:#e6db74">&#39;option4&#39;</span>: <span style="color:#e6db74">&#39;菜单三&#39;</span>,
        <span style="color:#e6db74">&#39;option5&#39;</span>: <span style="color:#e6db74">&#39;菜单四&#39;</span>
    }

    <span style="color:#66d9ef">return</span> {<span style="color:#e6db74">&#39;menu_dict&#39;</span>: menu}

<span style="color:#75715e"># 将函数的返回值，使用menu_tpl.html进行渲染，然后将渲染的结果当作menu_dict的返回值，在页面上调用时，整体渲染。</span>
</code></pre></div><p>menu_tpl.html文件如下：（存放于templates目录下)</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{% for key,value in menu_dict.items %}
    &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;&#34;</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;{{ key }}&#34;</span>&gt;{{ value }}&lt;/<span style="color:#f92672">a</span>&gt;
{% endfor %}
</code></pre></div><p>在templates模版中调用时</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">{% load rbac %}   我templatestags下存放的名称为 rbac，所以这里写文件名即可。
<span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Title&lt;/<span style="color:#f92672">title</span>&gt;
&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;
&lt;<span style="color:#f92672">h1</span>&gt;index&lt;/<span style="color:#f92672">h1</span>&gt;
&lt;<span style="color:#f92672">div</span>&gt;

    {% menu_dict %}   直接渲染即可
&lt;/<span style="color:#f92672">div</span>&gt;
&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;

</code></pre></div><h2 id="12-逻辑控制语法">1.2 逻辑控制语法</h2>
<p>循环等逻辑语句需要使用{% %} 来进行渲染</p>
<h3 id="121-for标签">1.2.1 for标签</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">for</span> i <span style="color:#66d9ef">in</span> li <span style="color:#75715e">%}</span>  # li 为后端传递给模板的变量
&lt;p&gt;<span style="color:#75715e">{{</span> i <span style="color:#75715e">}}</span>&lt;/p&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endfor</span> <span style="color:#75715e">%}</span>       #使用endfor来表示循环结束
</code></pre></div><p>在for循环中存在一个forloop变量，该变量记录循环相关数据</p>
<ul>
<li>forloop.counter：表示当前迭代数（第几次循环）从1开始</li>
<li>forloop.counter0：同上，但是从0开始</li>
<li>forloop.first：判断此次循环是否是第一次循环，是则返回True</li>
<li>forloop.revcounter：表示当前迭代数（第几次循环）- 倒序</li>
<li>forloop.last：判断此次循环是否是最后一次循环</li>
<li>forloop.parentloop：用于在嵌套循环时，获取父循环的上面的信息</li>
</ul>
<p>reversed和empty：</p>
<ul>
<li><code>reversed</code>：对可迭代对象进行逆序</li>
<li><code>empty</code>：如果可迭代对象为空</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">for</span> athlete <span style="color:#66d9ef">in</span> athlete_list <span style="color:#66d9ef">reversed</span> <span style="color:#75715e">%}</span>
...
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">empty</span> <span style="color:#75715e">%}</span>
... 如果被迭代的列表是空的或者不存在，执行empty
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endfor</span> <span style="color:#75715e">%}</span>
</code></pre></div><h3 id="122-if标签">1.2.2 if标签</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">if</span> li.1 <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">100</span> <span style="color:#75715e">%}</span>
&lt;p&gt; 大于 &lt;/p&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">elif</span> li.1 <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">100</span> <span style="color:#75715e">%}</span>
&lt;p&gt; 小于 &lt;/p&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">else</span> <span style="color:#75715e">%}</span>
&lt;p&gt; 等于 &lt;/p&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endif</span> <span style="color:#75715e">%}</span>         #使用endif来表示条件判断结束
</code></pre></div><h3 id="123-ifequalifnotequal-标签">1.2.3 ifequal/ifnotequal 标签</h3>
<p>{% ifequal %} 标签比较两个值，当他们相等时，显示在 {% ifequal %} 和 {% endifequal %} 之中所有的值。
下面的例子比较两个模板变量 user 和 currentuser :</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">ifequal</span> user currentuser <span style="color:#75715e">%}</span>
 &lt;h1&gt;Welcome!&lt;/h1&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endifequal</span> <span style="color:#75715e">%}</span>
</code></pre></div><p>和 {% if %} 类似， {% ifequal %} 支持可选的 {% else%} 标签</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">ifequal</span> section <span style="color:#e6db74">&#39;sitenews&#39;</span> <span style="color:#75715e">%}</span>
 &lt;h1&gt;Site News&lt;/h1&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">else</span> <span style="color:#75715e">%}</span>
 &lt;h1&gt;No News Here&lt;/h1&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endifequal</span> <span style="color:#75715e">%}</span>
</code></pre></div><h2 id="13-特殊标签">1.3 特殊标签</h2>
<p><code>{% url  'varname' %}</code>：引用路由配置的地址</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja">&lt;form action=&#34;<span style="color:#75715e">{%</span> <span style="color:#66d9ef">url</span> <span style="color:#e6db74">&#34;LOGIN&#34;</span><span style="color:#75715e">%}</span>&#34; method=&#34;POST&#34;&gt;    # 路由引用
          &lt;input type=&#34;text&#34;&gt;
          &lt;input type=&#34;submit&#34; value=&#34;提交&#34;&gt;
&lt;/form&gt;
</code></pre></div><p><code>{% verbatim %}</code>:禁止render解析。</p>
<p>既在有的时候我们仅仅只是想打印出 {{ hello }} 而已，使用verbatim来禁止render进行解析</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">verbatim</span> <span style="color:#75715e">%}</span>
    <span style="color:#75715e">{{</span>  hello <span style="color:#75715e">}}</span>
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">endverbatim</span> <span style="color:#75715e">%}</span>
 
# 使用verbatim 包起来的代码 将不会进行解析
</code></pre></div><p><code>{% csrf_token %}</code>:用于跨站请求伪造保护，防止跨站攻击的。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja">&lt;form&gt;
<span style="color:#75715e">{%</span> <span style="color:#66d9ef">csrf_token</span> <span style="color:#75715e">%}</span>
&lt;/form&gt;
</code></pre></div><p>一般用在form表单中。</p>
<h2 id="14-extends模板继承">1.4 extends模板继承</h2>
<p>        到目前为止，我们的模板范例都只是些零星的 HTML 片段，但在实际应用中，你将用 Django 模板系统来创建整个 HTML 页面。 这就带来一个常见的 Web 开发问题： 在整个网站中，如何减少共用页面区域（比如站点导航）所引起的重复和冗余代码？Django 解决此类问题的首选方法是使用一种优雅的策略 —— <code>模板继承</code>.<br>
        本质上来说，模板继承就是先构造一个基础框架模板，而后在其子模板中对它所包含站点公用部分和定义块进行重载.</p>
<p>编写模板需要使用模板标签：<br>
        <code>{% block name%} {% endblock %}</code>：所有的 {% block %} 标签告诉模板引擎，子模板可以重载这些部分。 每个{% block %}标签所要做的是告诉模板引擎，该模板下的这一块内容将有可能被子模板覆盖。</p>
<p>下面是一个html模板文件：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">// index.html文件

<span style="color:#75715e">&lt;!DOCTYPE html&gt;</span>
&lt;<span style="color:#f92672">html</span> <span style="color:#a6e22e">lang</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;en&#34;</span>&gt;
&lt;<span style="color:#f92672">head</span>&gt;
    &lt;<span style="color:#f92672">meta</span> <span style="color:#a6e22e">charset</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>&gt;
    &lt;<span style="color:#f92672">title</span>&gt;Title&lt;/<span style="color:#f92672">title</span>&gt;

&lt;/<span style="color:#f92672">head</span>&gt;
&lt;<span style="color:#f92672">body</span>&gt;

    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;title&#34;</span>&gt;&lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;left&#34;</span>&gt;
        &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;left_list&#34;</span>&gt;
            &lt;<span style="color:#f92672">a</span> <span style="color:#a6e22e">href</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;/booklist/&#34;</span>&gt;文章列表&lt;/<span style="color:#f92672">a</span>&gt;
        &lt;/<span style="color:#f92672">div</span>&gt;

    &lt;/<span style="color:#f92672">div</span>&gt;
    &lt;<span style="color:#f92672">div</span> <span style="color:#a6e22e">class</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;right&#34;</span>&gt;
        {% block content %}   // 这里定义content，表示这里可以被继承模板进行替换
        {% endblock %}    // 包起来的表示代码段
    &lt;/<span style="color:#f92672">div</span>&gt;

&lt;/<span style="color:#f92672">body</span>&gt;
&lt;/<span style="color:#f92672">html</span>&gt;
</code></pre></div><blockquote>
<p>HTML中包含 block 语句块的都可以称为模板文件</p>
</blockquote>
<p>        子模板进行继承，并定制自己要显示的内容(子模板不需要额外的html代码，其代码都来自于模板文件)，仅仅需要定义 block块内的信息即可，当然也可以不定义，或者在block块中调用父模板的内容。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-html" data-lang="html">// test.html

{% extends &#39;index.html&#39; %}   // 继承模板文件
 
{% block  content %}     // 针对模板中content的代码块进行定义

    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
    &lt;<span style="color:#f92672">h1</span>&gt;hello world&lt;/<span style="color:#f92672">h1</span>&gt;
 
{% endblock %}
</code></pre></div><p>使用注意：</p>
<ul>
<li>如果在模板中使用 {% extends %} ，必须保证其为模板中的<code>第一个</code>模板标记(<code>html首部</code>)。 否则，模板继承将不起作用。</li>
<li>一般来说，基础模板中的 {% block %} 标签越多越好。 记住，子模板不必定义父模板中所有的代码块，因此你可以用合理的缺省值对一些代码块进行填充，然后只对子模板所需的代码块进行（重）定义。 俗话说，钩子越多越好。</li>
<li>如果发觉自己在多个模板之间拷贝代码，你应该考虑将该代码段放置到父模板的某个 {% block %} 中。如果你需要访问父模板中的块的内容，使用 <code>{{ block.super }}</code> 这个标签吧，这一个魔法变量将会表现出父模板中的内容。 如果只想在上级代码块基础上添加内容，而不是全部重载，该变量就显得非常有用了。</li>
<li>不允许在同一个模板中定义多个同名的 {% block %} .存在这样的限制是因为block 标签的工作方式是双向的。也就是说，block 标签不仅挖了一个要填的坑，也定义了在父模板中这个坑所填充的内容。如果模板中出现了两个相同名称的 {% block %} 标签，父模板将无从得知要使用哪个块的内容。</li>
<li><code>一个html文件只能引入一个模版</code></li>
</ul>
<h2 id="15-include引入">1.5 include引入</h2>
<p>        在很多网站中，基本上的都会有一个开头和一个结尾，在每一个网页中都会显示。相对于这种的来说，在Django中，最好的方法就是使用include的标签，在每一个模板中都加入这个开头和结尾的标签。<br>
        简单来说，就是那些多个页面都需要的公共标签放在一个统一的html文件，供其他html文件引入。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-jinja" data-lang="jinja"><span style="color:#75715e">{%</span> <span style="color:#66d9ef">include</span> <span style="color:#e6db74">&#39;tpl.html&#39;</span> <span style="color:#75715e">%}</span>  : 表示引入tpl.html文件。
</code></pre></div><p>看下面的例子：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#75715e"># -------------------- tpl.html --------------------</span>
<span style="color:#f92672">&lt;</span>div<span style="color:#f92672">&gt;</span>
    <span style="color:#f92672">&lt;</span>h1<span style="color:#f92672">&gt;</span>hello world<span style="color:#f92672">&lt;/</span>h1<span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>
 
 
 
 
<span style="color:#75715e"># -------------------- xxx.html --------------------</span>
 
<span style="color:#f92672">...</span>
 
    <span style="color:#f92672">&lt;</span>div<span style="color:#f92672">&gt;</span>
        {<span style="color:#f92672">%</span> include <span style="color:#e6db74">&#39;tpl.html&#39;</span> <span style="color:#f92672">%</span>}   
        {<span style="color:#f92672">%</span> include <span style="color:#e6db74">&#39;tpl.html&#39;</span> <span style="color:#f92672">%</span>}  <span style="color:#f92672">//</span> tpl<span style="color:#f92672">.</span>html的全部内容会在这里填充
        <span style="color:#f92672">...</span>
    <span style="color:#f92672">&lt;/</span>div<span style="color:#f92672">&gt;</span>   
 
<span style="color:#f92672">...</span>
</code></pre></div><p>在一个页面中可以通过include引入不同的公共组件。
{% endraw %}</p>

</div>


  
</article>
      <footer id="main-footer" class="container main_footer">
  

  <div class="container nav foot no-print">
  
<a href="https://dachenzi.github.io/license">license</a>


  <a class="toplink" href="#">back to top</a>

</div>

  <div class="container credits">
  
<div class="container footline">
  
  code with <!-- raw HTML omitted --><!-- raw HTML omitted -->


</div>


  
<div class="container copyright">
  
  (c) 2015 Lee xin.


</div>


</div>

</footer>

    </main>
    
<script type="text/javascript">
  (function() {
    
    
    if (window.location.hostname == "localhost")
      return;
    var dsq = document.createElement('script'); dsq.async = true; dsq.type = 'text/javascript';
    dsq.src = '//your_disqus_shortname.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>



<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>



    
  </body>
</html>

